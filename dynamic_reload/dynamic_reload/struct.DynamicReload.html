<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `DynamicReload` struct in crate `dynamic_reload`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, DynamicReload">

    <title>dynamic_reload::DynamicReload - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='index.html'>dynamic_reload</a></p><script>window.sidebarCurrent = {name: 'DynamicReload', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>dynamic_reload</a>::<wbr><a class='struct' href=''>DynamicReload</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-24' class='srclink' href='../src/dynamic_reload/lib.rs.html#52-58' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct DynamicReload {
    // some fields omitted
}</pre><h2 id='methods'>Methods</h2><h3 class='impl'><code>impl <a class='struct' href='../dynamic_reload/struct.DynamicReload.html' title='dynamic_reload::DynamicReload'>DynamicReload</a></code></h3><div class='impl-items'><h4 id='method.new' class='method'><code>fn <a href='#method.new' class='fnname'>new</a>(search_paths: <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;&amp;'static <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>&gt;&gt;, shadow_dir: <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;&amp;'static <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>&gt;, _search: <a class='enum' href='../dynamic_reload/enum.Search.html' title='dynamic_reload::Search'>Search</a>) -&gt; <a class='struct' href='../dynamic_reload/struct.DynamicReload.html' title='dynamic_reload::DynamicReload'>DynamicReload</a></code></h4>
<div class='docblock'><p>Creates a DynamicReload object. </p>

<p><code>search_path</code> is a list of extra paths that when
calling <a href="struct.DynamicReload.html#method.add_library">add_library</a> the code will
also try to find the shared library within those locations.</p>

<p><code>shadow_dir</code> is a location where a temporary directory will be created to
keep a copy of all the shared libraries and load from there. The reason is that some
operating systems locks loaded shared files which would make it impossible to update them.
By having a separate directory DynamicReload will look for changes in the original path
while having them loaded from another</p>

<p><code>search</code> This is to allow DynamicReload to search in parent directiors from the
executable. Set this to <code>Search::Backwards</code> to allow that or to <code>Search::Default</code>
to only allow seach in the currenty directory of the of the executable</p>

<h1 id='examples' class='section-header'><a href='#examples'>Examples</a></h1><pre class='rust rust-example-rendered'>
<span class='comment'>// No extra search paths, temp directory in target/debug, allow search backwards</span>
<span class='ident'>DynamicReload</span>::<span class='ident'>new</span>(<span class='prelude-val'>None</span>, <span class='prelude-val'>Some</span>(<span class='string'>&quot;target/debug&quot;</span>), <span class='ident'>Search</span>::<span class='ident'>Backwards</span>);</pre>
<pre class='rust rust-example-rendered'>
<span class='comment'>// &quot;../..&quot; extra search path, temp directory in target/debug, allow search backwards</span>
<span class='ident'>DynamicReload</span>::<span class='ident'>new</span>(<span class='prelude-val'>Some</span>(<span class='macro'>vec</span><span class='macro'>!</span>[<span class='string'>&quot;../..&quot;</span>]), <span class='prelude-val'>Some</span>(<span class='string'>&quot;target/debug&quot;</span>), <span class='ident'>Search</span>::<span class='ident'>Backwards</span>);</pre>
</div><h4 id='method.add_library' class='method'><code>fn <a href='#method.add_library' class='fnname'>add_library</a>(&amp;mut self, name: &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>, name_format: <a class='enum' href='../dynamic_reload/enum.PlatformName.html' title='dynamic_reload::PlatformName'>PlatformName</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/rc/struct.Rc.html' title='alloc::rc::Rc'>Rc</a>&lt;<a class='struct' href='../dynamic_reload/struct.Lib.html' title='dynamic_reload::Lib'>Lib</a>&gt;, <a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>&gt;</code></h4>
<div class='docblock'><p>Add a library to be loaded and to be reloaded once updated. 
If PlatformName is set to Yes the input name will be formatted according
to the standard way libraries looks on that platform examples:</p>
<pre class='rust rust-example-rendered'>
<span class='ident'>Windows</span>: <span class='ident'>foobar</span> <span class='op'>-&gt;</span> <span class='ident'>foobar</span>.<span class='ident'>dll</span>
<span class='ident'>Linux</span>:   <span class='ident'>foobar</span> <span class='op'>-&gt;</span> <span class='ident'>libfoobar</span>.<span class='ident'>so</span>
<span class='ident'>Mac</span>:     <span class='ident'>foobar</span> <span class='op'>-&gt;</span> <span class='ident'>libfoobar</span>.<span class='ident'>dylib</span></pre>

<p>If set to no the given input name will be used as is. This function
will also search for the file in this priority order</p>
<pre class='rust rust-example-rendered'>
<span class='number'>1.</span> <span class='ident'>Current</span> <span class='ident'>directory</span>
<span class='number'>2.</span> <span class='ident'>In</span> <span class='ident'>the</span> <span class='ident'>search</span> <span class='ident'>paths</span> (<span class='ident'>relative</span> <span class='ident'>to</span> <span class='ident'>current</span> <span class='ident'>directory</span>) 
<span class='number'>3.</span> <span class='ident'>Current</span> <span class='ident'>directory</span> <span class='ident'>of</span> <span class='ident'>the</span> <span class='ident'>executable</span> 
<span class='number'>4.</span> <span class='ident'>Search</span> <span class='ident'>backwards</span> <span class='ident'>from</span> <span class='ident'>executable</span> <span class='kw'>if</span> <span class='ident'>Backwards</span> <span class='ident'>has</span> <span class='ident'>been</span> <span class='ident'>set</span> <span class='ident'>DynamicReload</span>::<span class='ident'>new</span> </pre>

<h1 id='examples-1' class='section-header'><a href='#examples-1'>Examples</a></h1><pre class='rust rust-example-rendered'>
<span class='comment'>// Add a library named test_lib and format it according to standard platform standard.</span>
<span class='ident'>add_library</span>(<span class='string'>&quot;test_lib&quot;</span>, <span class='ident'>PlatformName</span>::<span class='ident'>Yes</span>)</pre>
</div><h4 id='method.update' class='method'><code>fn <a href='#method.update' class='fnname'>update</a>&lt;F, T&gt;(&amp;mut self, update_call: F, data: &amp;mut T) <span class='where'>where F: <a class='trait' href='https://doc.rust-lang.org/nightly/core/ops/trait.Fn.html' title='core::ops::Fn'>Fn</a>(&amp;mut T, <a class='enum' href='../dynamic_reload/enum.UpdateState.html' title='dynamic_reload::UpdateState'>UpdateState</a>, <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;&amp;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/rc/struct.Rc.html' title='alloc::rc::Rc'>Rc</a>&lt;<a class='struct' href='../dynamic_reload/struct.Lib.html' title='dynamic_reload::Lib'>Lib</a>&gt;&gt;)</span></code></h4>
<div class='docblock'><p>Needs to be called in order to handle reloads of libraries. </p>

<p><code>update_call</code> funcion with it&#39;s data needs to be supplied to allow the application to
take appropriate action depending on what needs to be done with the loaded library.</p>
<pre class='rust rust-example-rendered'>
<span class='kw'>struct</span> <span class='ident'>Plugins</span> {
    <span class='comment'>// ...</span>
}

<span class='kw'>impl</span> <span class='ident'>Plugins</span> {
   <span class='kw'>fn</span> <span class='ident'>reload_callback</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>state</span>: <span class='ident'>UpdateState</span>, <span class='ident'>lib</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>Rc</span><span class='op'>&lt;</span><span class='ident'>Lib</span><span class='op'>&gt;&gt;</span>) {
       <span class='kw'>match</span> <span class='ident'>state</span> {
           <span class='ident'>UpdateState</span>::<span class='ident'>Before</span> <span class='op'>=&gt;</span> <span class='comment'>// save state, remove from lists, etc, here </span>
           <span class='ident'>UpdateState</span>::<span class='ident'>After</span> <span class='op'>=&gt;</span> <span class='comment'>// shared lib reloaded, re-add, restore state </span>
           <span class='ident'>UpdateState</span>::<span class='ident'>ReloadFalied</span> <span class='op'>=&gt;</span> <span class='comment'>// shared lib failed to reload </span>
       }
   }
}

<span class='kw'>fn</span> <span class='ident'>main</span>() {
    <span class='kw'>let</span> <span class='ident'>plugins</span> <span class='op'>=</span> <span class='ident'>Plugins</span> { ... };
    <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>dr</span> <span class='op'>=</span> <span class='ident'>DynamicReload</span>::<span class='ident'>new</span>(<span class='prelude-val'>None</span>, <span class='prelude-val'>Some</span>(<span class='string'>&quot;target/debug&quot;</span>), <span class='ident'>Search</span>::<span class='ident'>Backwards</span>);
    <span class='ident'>dr</span>.<span class='ident'>add_library</span>(<span class='string'>&quot;test_shared&quot;</span>, <span class='ident'>Search</span>::<span class='ident'>Backwards</span>);
    <span class='ident'>dr</span>.<span class='ident'>update</span>(<span class='ident'>Plugin</span>::<span class='ident'>reload_callback</span>, <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>plugins</span>);
}</pre>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "dynamic_reload";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script defer src="../search-index.js"></script>
</body>
</html>